# Gemini連携Webアプリ：導入・公開手順書

この手順書では、提供されたソースコード（Code.gs /
index.html）を使用して、Google Apps
ScriptでAIアプリを公開するまでの流れを説明します。

## 事前準備

- Googleアカウントにログインしていることを確認してください。

## ステップ 1：Gemini APIキーを取得する

AI（Gemini）を利用するための専用の「鍵」を取得します。

1.  [[Google AI Studio]](https://aistudio.google.com/)
    にアクセスします。

2.  利用規約が表示されたら、内容を確認してチェックを入れ、\[Continue\]
    をクリックします。

3.  画面左上の \[Get API key\] をクリックします。

4.  \[Create API key in new project\]
    という青いボタンをクリックします。

5.  表示された英数字の文字列（APIキー）を \[Copy\]
    し、メモ帳などに控えておきます。\
    注意：
    このキーは銀行のパスワードのようなものです。他人に教えたり、公開したりしないでください。

## ステップ 2：Google Apps Script プロジェクトを作成する

1.  [[Google ドライブ]](https://drive.google.com/)
    を開きます。

2.  左上の \[新規\] ＞ \[その他\] ＞ \[Google Apps Script\]
    を選択します。

    - ※見当たらない場合は「アプリを追加」から検索して追加してください。

3.  エディタが開いたら、左上の「無題のプロジェクト」をクリックし、好きな名前（例：Gemini_PDF分析アプリ）に変更します。

## ステップ 3：ソースコードを貼り付ける

### 1. Code.gs の編集

- 最初から入力されている function myFunction() {\...}
  をすべて消去します。

- 手元の Code.gs の中身をすべてコピー＆ペーストします。

### 2. index.html の作成

- 左側のメニューにある \[＋\]（ファイルを追加） ＞ \[HTML\]
  をクリックします。

- ファイル名を index と入力します（.html
  は自動で付くので不要です）。

- 最初から入っているコードをすべて消去し、手元の index.html
  の中身をすべてコピー＆ペーストします。

## ステップ 4：APIキーを設定する（重要）

プログラムの中に直接キーを書かず、安全な場所に保存します。

1.  画面左側の 歯車アイコン（プロジェクトの設定） をクリックします。

2.  一番下までスクロールし、\[スクリプトプロパティを編集\]
    をクリックします。

3.  \[スクリプトプロパティを追加\] を押し、以下の通り入力します。

    - プロパティ: GEMINI_API_KEY

    - 値: ステップ1でコピーした「APIキー」

4.  \[スクリプトプロパティを保存\] をクリックします。

## ステップ 5：Webアプリとしてデプロイ（公開）する

1.  画面右上の \[デプロイ\] ＞ \[新しいデプロイ\]
    をクリックします。

2.  左側の歯車アイコンをクリックし、種類で \[ウェブアプリ\]
    を選択します。

3.  以下の設定を確認して \[デプロイ\] をクリックします。

    - 説明: （任意。例：初版公開）

    - 次のユーザーとして実行: 自分

    - アクセスできるユーザー:
      全員（または「Googleアカウントを持つ全員」）

4.  \[アクセスを承認\]
    というボタンが出るので、自分のアカウントを選択します。

5.  「このアプリは Google で確認されていません」
    という警告が出ますが、\[詳細\] ＞
    \[（プロジェクト名）に移動（安全ではない）\] をクリックします。

6.  最後に \[許可\] をクリックします。

## 完了！

画面に 「ウェブアプリの URL」 が表示されます。

このURLをブラウザで開くと、アプリが起動します。他の人に使ってもらう場合は、このURLを共有してください。

### 💡 うまく動かないときは？

- APIキーは正しいですか？
  スペースなどが入っていないか確認してください。

- デプロイを更新しましたか？
  コードを書き換えた後は、再度「新しいデプロイ」を行うか、既存のデプロイを「編集」してバージョンを更新する必要があります。
